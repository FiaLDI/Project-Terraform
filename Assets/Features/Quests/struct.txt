ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°: d:\UnityGames\New-Game\Assets\Features\Quests

Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:
â””â”€â”€ Quests
    â”œâ”€â”€ Prefabs
    â”‚   â”œâ”€â”€ Quest system.prefab
    â”‚   â””â”€â”€ Quest system.prefab.meta
    â”œâ”€â”€ Scripts
    â”‚   â”œâ”€â”€ Core
    â”‚   â”‚   â”œâ”€â”€ QuestAsset.cs
    â”‚   â”‚   â”œâ”€â”€ QuestAsset.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestBehaviour.cs
    â”‚   â”‚   â”œâ”€â”€ QuestBehaviour.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestChain.cs
    â”‚   â”‚   â”œâ”€â”€ QuestChain.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestChainManager.cs
    â”‚   â”‚   â”œâ”€â”€ QuestChainManager.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestManager.cs
    â”‚   â”‚   â”œâ”€â”€ QuestManager.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestPoint.cs
    â”‚   â”‚   â””â”€â”€ QuestPoint.cs.meta
    â”‚   â”œâ”€â”€ UI
    â”‚   â”‚   â”œâ”€â”€ QuestInputHandler.cs
    â”‚   â”‚   â”œâ”€â”€ QuestInputHandler.cs.meta
    â”‚   â”‚   â”œâ”€â”€ QuestUI.cs
    â”‚   â”‚   â””â”€â”€ QuestUI.cs.meta
    â”‚   â”œâ”€â”€ Core.meta
    â”‚   â””â”€â”€ UI.meta
    â”œâ”€â”€ Types
    â”‚   â”œâ”€â”€ ApproachPoint
    â”‚   â”‚   â”œâ”€â”€ Configs
    â”‚   â”‚   â”‚   â”œâ”€â”€ Approach.asset
    â”‚   â”‚   â”‚   â””â”€â”€ Approach.asset.meta
    â”‚   â”‚   â”œâ”€â”€ Materials
    â”‚   â”‚   â”‚   â”œâ”€â”€ Mat_ApproachZone.mat
    â”‚   â”‚   â”‚   â””â”€â”€ Mat_ApproachZone.mat.meta
    â”‚   â”‚   â”œâ”€â”€ Prefabs
    â”‚   â”‚   â”‚   â”œâ”€â”€ QuestPoint.prefab
    â”‚   â”‚   â”‚   â””â”€â”€ QuestPoint.prefab.meta
    â”‚   â”‚   â”œâ”€â”€ Scripts
    â”‚   â”‚   â”‚   â”œâ”€â”€ ApproachPointQuestBehaviour.cs
    â”‚   â”‚   â”‚   â””â”€â”€ ApproachPointQuestBehaviour.cs.meta
    â”‚   â”‚   â”œâ”€â”€ Configs.meta
    â”‚   â”‚   â”œâ”€â”€ Materials.meta
    â”‚   â”‚   â”œâ”€â”€ Prefabs.meta
    â”‚   â”‚   â””â”€â”€ Scripts.meta
    â”‚   â”œâ”€â”€ Interaction
    â”‚   â”‚   â”œâ”€â”€ Configs
    â”‚   â”‚   â”‚   â”œâ”€â”€ Q_Interact_Console_Quest.asset
    â”‚   â”‚   â”‚   â””â”€â”€ Q_Interact_Console_Quest.asset.meta
    â”‚   â”‚   â”œâ”€â”€ Materials
    â”‚   â”‚   â”œâ”€â”€ Prefabs
    â”‚   â”‚   â”‚   â”œâ”€â”€ QuestInteractPoint.prefab
    â”‚   â”‚   â”‚   â””â”€â”€ QuestInteractPoint.prefab.meta
    â”‚   â”‚   â”œâ”€â”€ Scripts
    â”‚   â”‚   â”‚   â”œâ”€â”€ InteractQuestBehaviour.cs
    â”‚   â”‚   â”‚   â””â”€â”€ InteractQuestBehaviour.cs.meta
    â”‚   â”‚   â”œâ”€â”€ Configs.meta
    â”‚   â”‚   â”œâ”€â”€ Materials.meta
    â”‚   â”‚   â”œâ”€â”€ Prefabs.meta
    â”‚   â”‚   â””â”€â”€ Scripts.meta
    â”‚   â”œâ”€â”€ KillEnemies
    â”‚   â”‚   â”œâ”€â”€ Scripts
    â”‚   â”‚   â”‚   â”œâ”€â”€ KillEnemiesQuestBehaviour.cs
    â”‚   â”‚   â”‚   â””â”€â”€ KillEnemiesQuestBehaviour.cs.meta
    â”‚   â”‚   â””â”€â”€ Scripts.meta
    â”‚   â”œâ”€â”€ Shared
    â”‚   â”‚   â”œâ”€â”€ Materials
    â”‚   â”‚   â”‚   â”œâ”€â”€ Mat_QuestMarker.mat
    â”‚   â”‚   â”‚   â””â”€â”€ Mat_QuestMarker.mat.meta
    â”‚   â”‚   â””â”€â”€ Materials.meta
    â”‚   â”œâ”€â”€ Stand Zone
    â”‚   â”‚   â”œâ”€â”€ Config
    â”‚   â”‚   â”‚   â”œâ”€â”€ TestStandQuest.asset
    â”‚   â”‚   â”‚   â””â”€â”€ TestStandQuest.asset.meta
    â”‚   â”‚   â”œâ”€â”€ Materials
    â”‚   â”‚   â”‚   â”œâ”€â”€ Mat_StandZone.mat
    â”‚   â”‚   â”‚   â””â”€â”€ Mat_StandZone.mat.meta
    â”‚   â”‚   â”œâ”€â”€ Prefabs
    â”‚   â”‚   â”‚   â”œâ”€â”€ QuestStandPoint.prefab
    â”‚   â”‚   â”‚   â””â”€â”€ QuestStandPoint.prefab.meta
    â”‚   â”‚   â”œâ”€â”€ Scripts
    â”‚   â”‚   â”‚   â”œâ”€â”€ StandOnPointQuestBehaviour.cs
    â”‚   â”‚   â”‚   â””â”€â”€ StandOnPointQuestBehaviour.cs.meta
    â”‚   â”‚   â”œâ”€â”€ Config.meta
    â”‚   â”‚   â”œâ”€â”€ Materials.meta
    â”‚   â”‚   â”œâ”€â”€ Prefabs.meta
    â”‚   â”‚   â””â”€â”€ Scripts.meta
    â”‚   â”œâ”€â”€ ApproachPoint.meta
    â”‚   â”œâ”€â”€ Interaction.meta
    â”‚   â”œâ”€â”€ KillEnemies.meta
    â”‚   â”œâ”€â”€ Shared.meta
    â”‚   â””â”€â”€ Stand Zone.meta
    â”œâ”€â”€ UI
    â”‚   â”œâ”€â”€ QuestTemplate.prefab
    â”‚   â””â”€â”€ QuestTemplate.prefab.meta
    â”œâ”€â”€ Prefabs.meta
    â”œâ”€â”€ Scripts.meta
    â”œâ”€â”€ Types.meta
    â””â”€â”€ UI.meta

Ğ¢ĞµĞºÑÑ‚ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestAsset.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;

namespace Quests
{
    [CreateAssetMenu(fileName = "NewQuest", menuName = "Quests/Quest Asset")]
    public class QuestAsset : ScriptableObject
    {
        [Header("ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ")]
        public string questID;
        public string questName;
        [TextArea] public string description;

        [Header("ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)")]
        [HideInInspector] public int currentProgress;
        [HideInInspector] public int targetProgress;

        [Header("Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ ĞºĞ²ĞµÑÑ‚Ğ°")]
        [SerializeReference] 
        public QuestBehaviour behaviour;

        public delegate void QuestUpdated(QuestAsset quest);
        public event QuestUpdated OnQuestUpdated;

        /// <summary>Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°</summary>
        public void ResetProgress()
        {
            currentProgress = 0;
            targetProgress = 0;
            NotifyQuestUpdated();
        }

        /// <summary>Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ½Ğ¾Ğ²ÑƒÑ Ñ†ĞµĞ»ÑŒ</summary>
        public void RegisterTarget()
        {
            targetProgress++;
            NotifyQuestUpdated();
        }

        /// <summary>ĞĞ´Ğ½Ğ° Ñ†ĞµĞ»ÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ°</summary>
        public void TargetCompleted()
        {
            currentProgress++;
            NotifyQuestUpdated();
        }

        /// <summary>ĞšĞ²ĞµÑÑ‚ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½?</summary>
        public bool IsCompleted => currentProgress >= targetProgress && targetProgress > 0;

        public void NotifyQuestUpdated()
        {
            OnQuestUpdated?.Invoke(this);
        }
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestBehaviour.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;

namespace Quests
{
    /// <summary>
    /// Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ ĞºĞ²ĞµÑÑ‚Ğ°.
    /// ĞÑ‚ Ğ½ĞµĞ³Ğ¾ Ğ½Ğ°ÑĞ»ĞµĞ´ÑƒÑÑ‚ÑÑ StandOnPointQuestBehaviour, ApproachPointQuestBehaviour Ğ¸ Ñ‚.Ğ¿.
    /// </summary>
    [System.Serializable]
    public abstract class QuestBehaviour
    {
        public virtual void StartQuest(QuestAsset quest) { }
        public virtual void UpdateProgress(QuestAsset quest, int amount = 1) { }
        public virtual void CompleteQuest(QuestAsset quest) { }
        public virtual void ResetQuest(QuestAsset quest) { }

        // ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ»Ğ°Ğ³Ğ¸ Ğ´Ğ»Ñ UI
        public virtual bool IsActive => false;
        public virtual bool IsCompleted => false;
        public virtual int CurrentProgress => 0;
        public virtual int TargetProgress => 0;
        public abstract QuestBehaviour Clone();
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestChain.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using System.Collections.Generic;
using UnityEngine;

namespace Quests
{
    [CreateAssetMenu(fileName = "NewQuestChain", menuName = "Quests/Quest Chain")]
    public class QuestChain : ScriptableObject
    {
        [Header("ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ")]
        public string chainName;

        [Header("ĞšĞ²ĞµÑÑ‚Ñ‹ Ğ¿Ğ¾ Ğ¿Ğ¾Ñ€ÑĞ´ĞºÑƒ")]
        public List<QuestAsset> questsInOrder = new List<QuestAsset>();

        private int currentQuestIndex = -1;

        /// <summary>
        /// Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ²ĞµÑÑ‚Ğ°
        /// </summary>
        public void StartChain()
        {
            currentQuestIndex = 0;
            if (questsInOrder.Count > 0 && questsInOrder[0] != null)
            {
                Debug.Log($"â–¶ QuestChain '{chainName}' ÑÑ‚Ğ°Ñ€Ñ‚ÑƒĞµÑ‚ Ñ ĞºĞ²ĞµÑÑ‚Ğ° '{questsInOrder[0].questName}'");
                QuestManager.Instance.StartQuest(questsInOrder[0]);
            }
            else
            {
                Debug.LogWarning($"âš  QuestChain '{chainName}' Ğ¿ÑƒÑÑ‚Ğ°Ñ Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ ĞºĞ²ĞµÑÑ‚ Ğ½Ğµ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½!");
            }
        }

        /// <summary>
        /// ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ ĞºĞ²ĞµÑÑ‚Ñƒ
        /// </summary>
        public void MoveToNextQuest()
        {
            if (currentQuestIndex < 0 || currentQuestIndex >= questsInOrder.Count)
            {
                Debug.LogWarning($"âš  QuestChain '{chainName}' ÑƒĞ¶Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° Ğ¸Ğ»Ğ¸ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°!");
                return;
            }

            currentQuestIndex++;
            if (currentQuestIndex < questsInOrder.Count)
            {
                QuestAsset nextQuest = questsInOrder[currentQuestIndex];
                if (nextQuest != null)
                {
                    Debug.Log($"â–¶ QuestChain '{chainName}' Ğ¿ĞµÑ€ĞµÑˆĞ»Ğ° Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ ĞºĞ²ĞµÑÑ‚Ñƒ: {nextQuest.questName}");
                    QuestManager.Instance.StartQuest(nextQuest);
                }
                else
                {
                    Debug.LogError($"âŒ QuestChain '{chainName}': ĞºĞ²ĞµÑÑ‚ Ğ½Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ {currentQuestIndex} Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹!");
                }
            }
            else
            {
                Debug.Log($"âœ… QuestChain '{chainName}' Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°!");
                currentQuestIndex = -1; // ÑĞ±Ñ€Ğ¾Ñ
            }
        }

        /// <summary>
        /// Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ²ÑĞµĞ¹ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸
        /// </summary>
        public void ResetChain()
        {
            Debug.Log($"âŸ³ QuestChain '{chainName}' ÑĞ±Ñ€Ğ¾ÑˆĞµĞ½Ğ°");
            currentQuestIndex = -1;
        }
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestChainManager.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;
using System.Collections.Generic;

namespace Quests
{
    public class QuestChainManager : MonoBehaviour
    {
        [Header("Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ†ĞµĞ¿Ğ¾Ñ‡ĞµĞº")]
        public List<QuestChain> questChains = new List<QuestChain>();

        [Header("ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°")]
        public bool autoStartChainsOnStart = true;
        public int startChainIndex = 0;

        private Dictionary<QuestAsset, QuestChain> questToChainMap = new Dictionary<QuestAsset, QuestChain>();
        private QuestChain activeChain;

        void Start()
        {
            Debug.Log("â–¶ QuestChainManager: Start()");

            InitializeChains();

            if (autoStartChainsOnStart)
            {
                if (questChains.Count > 0)
                {
                    Debug.Log($"â–¶ QuestChainManager: Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ {startChainIndex}");
                    StartChain(startChainIndex);
                }
                else
                {
                    Debug.LogError("âŒ QuestChainManager: Ğ½ĞµÑ‚ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞµĞº Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°!");
                }
            }
        }

        void InitializeChains()
        {
            questToChainMap.Clear();
            Debug.Log($"â–¶ QuestChainManager: Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ {questChains.Count} Ñ†ĞµĞ¿Ğ¾Ñ‡ĞµĞº");

            for (int i = 0; i < questChains.Count; i++)
            {
                QuestChain chain = questChains[i];
                if (chain == null)
                {
                    Debug.LogError($"âŒ QuestChainManager: Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° {i} Ğ¿ÑƒÑÑ‚Ğ°Ñ!");
                    continue;
                }

                Debug.Log($"â–¶ QuestChainManager: Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° '{chain.chainName}' ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ {chain.questsInOrder.Count} ĞºĞ²ĞµÑÑ‚Ğ¾Ğ²");

                for (int j = 0; j < chain.questsInOrder.Count; j++)
                {
                    QuestAsset quest = chain.questsInOrder[j];
                    if (quest != null)
                    {
                        questToChainMap[quest] = chain;
                        Debug.Log($"â–¶ ĞšĞ²ĞµÑÑ‚ '{quest.questName}' Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞµ '{chain.chainName}'");
                    }
                    else
                    {
                        Debug.LogError($"âŒ QuestChainManager: ĞºĞ²ĞµÑÑ‚ {j} Ğ² Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞµ '{chain.chainName}' Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹!");
                    }
                }
            }
        }

        public void StartChain(int chainIndex)
        {
            Debug.Log($"â–¶ QuestChainManager.StartChain: Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ {chainIndex}");

            if (chainIndex >= 0 && chainIndex < questChains.Count)
            {
                activeChain = questChains[chainIndex];
                if (activeChain != null)
                {
                    Debug.Log($"â–¶ QuestChainManager: Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ° Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° '{activeChain.chainName}'");
                    activeChain.StartChain();
                }
                else
                {
                    Debug.LogError($"âŒ QuestChainManager: Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° {chainIndex} Ğ¿ÑƒÑÑ‚Ğ°Ñ!");
                }
            }
            else
            {
                Debug.LogError($"âŒ QuestChainManager: Ğ¸Ğ½Ğ´ĞµĞºÑ {chainIndex} Ğ²Ğ½Ğµ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ° (Ğ²ÑĞµĞ³Ğ¾ {questChains.Count})");
            }
        }

        public void OnQuestCompleted(QuestAsset completedQuest)
        {
            if (completedQuest == null)
            {
                Debug.LogError("âŒ QuestChainManager.OnQuestCompleted: completedQuest is null");
                return;
            }

            Debug.Log($"â–¶ QuestChainManager.OnQuestCompleted: Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½ '{completedQuest.questName}'");

            if (questToChainMap.ContainsKey(completedQuest))
            {
                QuestChain chain = questToChainMap[completedQuest];
                if (chain != null)
                {
                    Debug.Log($"â–¶ ĞšĞ²ĞµÑÑ‚ '{completedQuest.questName}' Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ» ÑÑ‚Ğ°Ğ¿ Ğ² Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞµ '{chain.chainName}'");
                    chain.MoveToNextQuest();
                }
                else
                {
                    Debug.LogError($"âŒ QuestChainManager: Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° Ğ´Ğ»Ñ '{completedQuest.questName}' Ğ¿ÑƒÑÑ‚Ğ°Ñ!");
                }
            }
            else
            {
                Debug.LogWarning($"âš  QuestChainManager: ĞºĞ²ĞµÑÑ‚ '{completedQuest.questName}' Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞµ");
            }
        }

        [ContextMenu("Start First Chain")]
        void StartFirstChain()
        {
            StartChain(0);
        }

        [ContextMenu("Reset All Chains")]
        void ResetAllChains()
        {
            foreach (QuestChain chain in questChains)
            {
                if (chain != null) chain.ResetChain();
            }
            Debug.Log("â–¶ QuestChainManager: Ğ²ÑĞµ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ ÑĞ±Ñ€Ğ¾ÑˆĞµĞ½Ñ‹");
        }
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestManager.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using System.Collections.Generic;
using UnityEngine;

namespace Quests
{
    public class QuestManager : MonoBehaviour
    {
        public static QuestManager Instance;

        public List<QuestAsset> activeQuests = new();
        public List<QuestAsset> completedQuests = new();
        public QuestUI questUI;

        private void Awake()
        {
            if (Instance == null) Instance = this;
            else Destroy(gameObject);

            StartSceneQuests();
        }

        private void Start()
        {
            // âš¡ ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ†ĞµĞ½Ñ‹ Ğ¸Ñ‰ĞµĞ¼ Ğ²ÑĞµ ĞºĞ²ĞµÑÑ‚Ñ‹ Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¸Ñ…
            
        }

        /// <summary>
        /// Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ²ĞµÑÑ‚
        /// </summary>
        public void StartQuest(QuestAsset quest)
        {
            if (quest == null || activeQuests.Contains(quest)) return;

            activeQuests.Add(quest);

            // UI ÑÑ€Ğ°Ğ·Ñƒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼
            questUI?.AddQuest(quest);

            // Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ
            quest.behaviour?.StartQuest(quest);
        }

        /// <summary>
        /// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ (Ğ´ĞµÑ€Ğ³Ğ°ĞµÑ‚ÑÑ Ğ¸Ğ· QuestPoint Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğ¸ Ñ†ĞµĞ»Ğ¸)
        /// </summary>
        public void UpdateQuestProgress(QuestAsset quest)
        {
            if (quest == null) return;

            quest.behaviour?.UpdateProgress(quest);
            questUI?.UpdateQuest(quest);

            if (quest.IsCompleted)
            {
                quest.behaviour?.CompleteQuest(quest);
                CompleteQuest(quest);
            }
        }

        /// <summary>
        /// Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ²ĞµÑÑ‚Ğ°
        /// </summary>
        public void CompleteQuest(QuestAsset quest)
        {
            if (quest == null || !activeQuests.Contains(quest)) return;

            activeQuests.Remove(quest);
            completedQuests.Add(quest);

            questUI?.RemoveQuest(quest);
        }

        /// <summary>
        /// Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ²ĞµÑÑ‚Ğ¾Ğ², ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ Ñ€Ğ°ÑÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ½Ğ° ÑÑ†ĞµĞ½Ğµ
        /// </summary>
       public void StartSceneQuests()
        {
            QuestPoint[] points = FindObjectsOfType<QuestPoint>();

            HashSet<QuestAsset> quests = new HashSet<QuestAsset>();
            foreach (var point in points)
            {
                if (point.linkedQuest != null)
                    quests.Add(point.linkedQuest);
            }

            foreach (var quest in quests)
            {
                // 1) ÑĞ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ”Ğ ÑÑ‚Ğ°Ñ€Ñ‚Ğ° ĞºĞ²ĞµÑÑ‚Ğ°
                quest.ResetProgress();

                // 2) Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµĞ¼ ĞºĞ²ĞµÑÑ‚ (Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑˆĞµĞ¼ UI)
                StartQuest(quest);

                // 3) UI Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ğ¼ ÑĞ²Ğ½Ğ¾
                questUI?.UpdateQuest(quest);
            }

            Debug.Log($"[QuestManager] Ğ—Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ¾ ĞºĞ²ĞµÑÑ‚Ğ¾Ğ² Ğ½Ğ° ÑÑ†ĞµĞ½Ğµ: {quests.Count}");
        }

    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\Core\QuestPoint.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;

namespace Quests
{
    [RequireComponent(typeof(SphereCollider))]
    public class QuestPoint : MonoBehaviour
    {
        [Tooltip("ĞšĞ²ĞµÑÑ‚, Ğº ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½Ğ° ÑÑ‚Ğ° Ñ†ĞµĞ»ÑŒ")]
        public QuestAsset linkedQuest;

        private bool isCompleted;

        private QuestBehaviour localBehaviour;

        private void Awake()
        {
            SphereCollider col = GetComponent<SphereCollider>();
            col.isTrigger = true;
            col.radius = 2f;
        }

        private void Start()
        {
            if (linkedQuest != null)
            {
                linkedQuest.RegisterTarget();

                if (linkedQuest.behaviour != null)
                {
                    localBehaviour = linkedQuest.behaviour.Clone();

                    if (localBehaviour is ApproachPointQuestBehaviour approach)
                        approach.targetPoint = transform;
                    else if (localBehaviour is StandOnPointQuestBehaviour stand)
                        stand.targetPoint = transform;
                    else if (localBehaviour is InteractQuestBehaviour interact)
                        interact.targetPoint = transform;
                }

                Debug.Log($"ĞĞ¾Ğ²Ğ°Ñ Ñ†ĞµĞ»ÑŒ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² ĞºĞ²ĞµÑÑ‚Ğµ '{linkedQuest.questName}'. Ğ’ÑĞµĞ³Ğ¾ Ñ†ĞµĞ»ĞµĞ¹: {linkedQuest.targetProgress}");
            }
        }

        private void Update()
        {
            if (linkedQuest == null || isCompleted) return;

            localBehaviour?.UpdateProgress(linkedQuest);

            if (CheckGoalComplete())
            {
                Complete();
            }
        }

        private void OnTriggerEnter(Collider other)
        {
            if (linkedQuest == null || isCompleted) return;
            if (!other.CompareTag("Player")) return;

            localBehaviour?.UpdateProgress(linkedQuest);

            if (CheckGoalComplete())
                Complete();
        }

        private bool CheckGoalComplete()
        {
            if (localBehaviour is ApproachPointQuestBehaviour approach)
            {
                Transform player = GameObject.FindGameObjectWithTag("Player").transform;
                return Vector3.Distance(player.position, transform.position) <= approach.requiredDistance;
            }
            else if (localBehaviour is StandOnPointQuestBehaviour stand)
            {
                return stand.IsCompleted;
            }
            else if (localBehaviour is InteractQuestBehaviour interact)
            {
                return interact.IsCompleted;
            }


            return localBehaviour == null;


        }

        private void Complete()
        {
            if (isCompleted) return;
            isCompleted = true;

            linkedQuest.TargetCompleted();
            localBehaviour?.CompleteQuest(linkedQuest);

            QuestManager.Instance?.UpdateQuestProgress(linkedQuest);

            Debug.Log($"Ğ¦ĞµĞ»ÑŒ ĞºĞ²ĞµÑÑ‚Ğ° '{linkedQuest.questName}' Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° ({linkedQuest.currentProgress}/{linkedQuest.targetProgress})");

            Destroy(gameObject);
        }
    }
}



Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\UI\QuestInputHandler.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;
using UnityEngine.InputSystem;

namespace Quests
{
    public class QuestInputHandler : MonoBehaviour
    {
        [Header("UI")]
        [SerializeField] private QuestUI questUI;

        private InputSystem_Actions inputActions;

        private void Awake()
        {
            Debug.Log("QuestInputHandler: Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° ToggleQuests ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°");

            inputActions = new InputSystem_Actions();

            // ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ ToggleQuests (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ° J)
            inputActions.UI.ToggleQuests.performed += ctx => ToggleQuests();
        }

        private void OnEnable()
        {
            inputActions.Enable();
        }

        private void OnDisable()
        {
            inputActions.Disable();
        }

        private void ToggleQuests()
        {
            if (questUI != null)
            {
                questUI.ToggleAllQuestsPanel();
                Debug.Log("ğŸ“– QuestInputHandler: ToggleQuests Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½");
            }
        }
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Scripts\UI\QuestUI.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;
using UnityEngine.UI;
using TMPro;
using System.Collections;
using System.Collections.Generic;

namespace Quests
{
    public class QuestUI : MonoBehaviour
    {
        [Header("HUD (Ğ²ÑĞµĞ³Ğ´Ğ° Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğ¹ Ğ»Ğ¾Ğ³)")]
        public Transform questPanel;
        public GameObject questTemplate;
        public int maxHudQuests = 5; // âš¡ Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ ĞºĞ²ĞµÑÑ‚Ğ¾Ğ² Ğ½Ğ° HUD

        [Header("Ğ–ÑƒÑ€Ğ½Ğ°Ğ» Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… ĞºĞ²ĞµÑÑ‚Ğ¾Ğ² (AllQuestsPanel)")]
        public GameObject allQuestsPanel;
        public Transform activeQuestsParent;
        public Transform completedQuestsParent;
        public GameObject allQuestTemplate;

        [Header("Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ")]
        public GameObject notificationPanel;
        public TMP_Text notificationText;
        public float notificationDuration = 3f;

        // HUD ĞºĞ²ĞµÑÑ‚Ñ‹
        private Dictionary<QuestAsset, GameObject> hudQuestEntries = new();

        // Ğ–ÑƒÑ€Ğ½Ğ°Ğ» (AllQuestsPanel)
        private Dictionary<QuestAsset, GameObject> allQuestEntries = new();

        private bool isAllQuestsPanelOpen = false;
        private Coroutine notificationCoroutine;

        private void Start()
        {
            if (allQuestsPanel != null)
                allQuestsPanel.SetActive(false);

            if (notificationPanel != null)
                notificationPanel.SetActive(false);
        }

        public void ToggleAllQuestsPanel()
        {
            if (allQuestsPanel == null) return;

            isAllQuestsPanelOpen = !isAllQuestsPanelOpen;
            allQuestsPanel.SetActive(isAllQuestsPanelOpen);

            if (isAllQuestsPanelOpen)
                RefreshAllQuestsPanel();
        }

        private void RefreshAllQuestsPanel()
        {
            // ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° UI Ğ¿ĞµÑ€ĞµĞ´ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸ĞµĞ¼
            foreach (Transform child in activeQuestsParent)
                Destroy(child.gameObject);
            foreach (Transform child in completedQuestsParent)
                Destroy(child.gameObject);

            allQuestEntries.Clear();

            if (QuestManager.Instance == null) return;

            foreach (var quest in QuestManager.Instance.completedQuests)
                if (quest != null)
                    CreateAllQuestEntry(quest, completedQuestsParent);

            foreach (var quest in QuestManager.Instance.activeQuests)
                if (quest != null)
                    CreateAllQuestEntry(quest, activeQuestsParent);
        }

        public void AddQuest(QuestAsset quest)
        {
            if (quest == null) return;

            // --- HUD (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ maxHudQuests) ---
            if (hudQuestEntries.Count < maxHudQuests && !hudQuestEntries.ContainsKey(quest))
            {
                GameObject entry = Instantiate(questTemplate, questPanel);
                entry.SetActive(true);
                UpdateQuestEntry(entry, quest);
                hudQuestEntries.Add(quest, entry);
            }

            // --- Ğ–ÑƒÑ€Ğ½Ğ°Ğ» (Ğ²ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ) ---
            if (!allQuestEntries.ContainsKey(quest))
            {
                GameObject entry = CreateAllQuestEntry(quest, activeQuestsParent);
                allQuestEntries.Add(quest, entry);
            }

            quest.OnQuestUpdated += UpdateQuest;

            ShowQuestNotification($"Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ ĞºĞ²ĞµÑÑ‚: {quest.questName}");
            UpdateQuest(quest);
        }

        public void UpdateQuest(QuestAsset quest)
        {
            if (quest == null) return;

            // HUD
            if (hudQuestEntries.ContainsKey(quest))
                UpdateQuestEntry(hudQuestEntries[quest], quest);

            // Ğ–ÑƒÑ€Ğ½Ğ°Ğ»
            if (allQuestEntries.ContainsKey(quest))
                UpdateQuestEntry(allQuestEntries[quest], quest);

            // Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ
            if (quest.IsCompleted)
            {
                ShowQuestNotification($"Ğ—Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½ ĞºĞ²ĞµÑÑ‚: {quest.questName}");

                if (hudQuestEntries.ContainsKey(quest))
                {
                    Destroy(hudQuestEntries[quest]);
                    hudQuestEntries.Remove(quest);
                }

                if (isAllQuestsPanelOpen)
                    RefreshAllQuestsPanel();
            }
        }

        public void RemoveQuest(QuestAsset quest)
        {
            if (quest == null) return;

            quest.OnQuestUpdated -= UpdateQuest;

            if (hudQuestEntries.ContainsKey(quest))
            {
                Destroy(hudQuestEntries[quest]);
                hudQuestEntries.Remove(quest);
            }

            if (allQuestEntries.ContainsKey(quest))
            {
                Destroy(allQuestEntries[quest]);
                allQuestEntries.Remove(quest);
            }
        }

        private GameObject CreateAllQuestEntry(QuestAsset quest, Transform parent)
        {
            if (allQuestTemplate == null || parent == null) return null;
            GameObject entry = Instantiate(allQuestTemplate, parent);
            entry.SetActive(true);
            UpdateQuestEntry(entry, quest);
            return entry;
        }

        private void UpdateQuestEntry(GameObject entry, QuestAsset quest)
        {
            if (entry == null || quest == null) return;

            TMP_Text questText = entry.GetComponentInChildren<TMP_Text>();
            Slider questSlider = entry.GetComponentInChildren<Slider>();

            int current = quest.currentProgress;
            int target = quest.targetProgress;
            bool completed = quest.IsCompleted;

            if (questText != null)
            {
                string status = completed ? "âœ” " : "";
                questText.text = $"{status}{quest.questName} ({current}/{target})";
                questText.color = completed ? Color.green : Color.white;
            }

            if (questSlider != null)
            {
                questSlider.value = target > 0 ? (float)current / target : 0f;
                questSlider.gameObject.SetActive(!completed);
            }
        }

        public void ShowQuestNotification(string message)
        {
            if (notificationPanel == null || notificationText == null) return;

            notificationText.text = message;
            notificationPanel.SetActive(true);

            if (notificationCoroutine != null)
                StopCoroutine(notificationCoroutine);

            notificationCoroutine = StartCoroutine(HideNotificationAfterDelay());
        }

        private IEnumerator HideNotificationAfterDelay()
        {
            yield return new WaitForSeconds(notificationDuration);
            if (notificationPanel != null)
                notificationPanel.SetActive(false);
        }

        public void CloseAllQuestsPanel()
        {
            if (allQuestsPanel != null)
            {
                allQuestsPanel.SetActive(false);
                isAllQuestsPanelOpen = false;
            }
        }
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Types\ApproachPoint\Scripts\ApproachPointQuestBehaviour.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;

namespace Quests
{
    [System.Serializable]
    public class ApproachPointQuestBehaviour : QuestBehaviour
    {
        public Transform targetPoint;
        public float requiredDistance = 3f;

        private bool active;
        private bool completed;

        public override void StartQuest(QuestAsset quest)
        {
            active = true;
            completed = false;
        }

        public override void UpdateProgress(QuestAsset quest, int amount = 1)
        {
            if (!active || completed || targetPoint == null) return;

            Transform player = GameObject.FindGameObjectWithTag("Player").transform;
            float dist = Vector3.Distance(player.position, targetPoint.position);

            if (dist <= requiredDistance)
            {
                CompleteQuest(quest);
            }
        }

        public override void CompleteQuest(QuestAsset quest)
        {
            if (completed) return;
            completed = true;
            active = false;
        }

        public override void ResetQuest(QuestAsset quest)
        {
            active = false;
            completed = false;
        }

        public override bool IsActive => active;
        public override bool IsCompleted => completed;
        public override int CurrentProgress => completed ? 1 : 0;
        public override int TargetProgress => 1;

        public override QuestBehaviour Clone() => (ApproachPointQuestBehaviour)MemberwiseClone();
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Types\Interaction\Scripts\InteractQuestBehaviour.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
ï»¿using UnityEngine;
using UnityEngine.InputSystem;

namespace Quests
{
    [System.Serializable]
    public class InteractQuestBehaviour : QuestBehaviour
    {
        [Tooltip("Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ QuestPoint'Ğ¾Ğ¼)")]
        public Transform targetPoint;

        [Tooltip("Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ, Ğ² Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ°Ñ… ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ")]
        public float requiredDistance = 2f;

        private bool active;
        private bool completed;

        public override void StartQuest(QuestAsset quest)
        {
            active = true;
            completed = false;
        }

        public override void UpdateProgress(QuestAsset quest, int amount = 1)
        {
            if (!active || completed || targetPoint == null)
                return;

            Transform player = GameObject.FindGameObjectWithTag("Player")?.transform;
            if (player == null)
                return;

            float dist = Vector3.Distance(player.position, targetPoint.position);

            if (dist <= requiredDistance &&
                Keyboard.current != null &&
                Keyboard.current.eKey.wasPressedThisFrame)
            {
                CompleteQuest(quest);
            }
        }

        public override void CompleteQuest(QuestAsset quest)
        {
            if (completed) return;

            completed = true;
            active = false;
        }

        public override void ResetQuest(QuestAsset quest)
        {
            active = false;
            completed = false;
        }

        public override bool IsActive => active;
        public override bool IsCompleted => completed;
        public override int CurrentProgress => completed ? 1 : 0;
        public override int TargetProgress => 1;

        public override QuestBehaviour Clone()
            => (InteractQuestBehaviour)MemberwiseClone();
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Types\KillEnemies\Scripts\KillEnemiesQuestBehaviour.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
namespace Quests
{
    [System.Serializable]
    public class KillEnemiesQuestBehaviour : QuestBehaviour
    {
        public string enemyTag = "Enemy";
        public int requiredKills = 5;

        private int currentKills;
        private bool active;
        private bool completed;

        public override void StartQuest(QuestAsset quest)
        {
            currentKills = 0;
            active = true;
            completed = false;
        }

        public void RegisterKill()
        {
            if (!active || completed) return;
            currentKills++;
        }

        public override void UpdateProgress(QuestAsset quest, int amount = 1)
        {
            if (!active || completed) return;
            if (currentKills >= requiredKills)
                CompleteQuest(quest);
        }

        public override void CompleteQuest(QuestAsset quest)
        {
            if (completed) return;
            completed = true;
            active = false;
        }

        public override void ResetQuest(QuestAsset quest)
        {
            currentKills = 0;
            active = false;
            completed = false;
        }

        public override bool IsActive => active;
        public override bool IsCompleted => completed;
        public override int CurrentProgress => currentKills;
        public override int TargetProgress => requiredKills;

        public override QuestBehaviour Clone() => (KillEnemiesQuestBehaviour)MemberwiseClone();
    }
}


Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ d:\UnityGames\New-Game\Assets\Features\Quests\Types\Stand Zone\Scripts\StandOnPointQuestBehaviour.cs (ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: utf-8):
using UnityEngine;

namespace Quests
{
    [System.Serializable]
    public class StandOnPointQuestBehaviour : QuestBehaviour
    {
        public Transform targetPoint;
        public float requiredStayTime = 2f;

        private float stayTimer;
        private bool active;
        private bool completed;

        public override void StartQuest(QuestAsset quest)
        {
            stayTimer = 0f;
            active = true;
            completed = false;
        }

        public override void UpdateProgress(QuestAsset quest, int amount = 1)
        {
            if (!active || completed || targetPoint == null) return;

            Transform player = GameObject.FindGameObjectWithTag("Player").transform;
            float dist = Vector3.Distance(player.position, targetPoint.position);

            if (dist < 2f)
            {
                stayTimer += Time.deltaTime;

                if (stayTimer >= requiredStayTime)
                {
                    completed = true;
                    active = false;
                }

            }
            else
            {
                stayTimer = 0f;
            }
        }

        public override void CompleteQuest(QuestAsset quest)
        {
            // Ğ·Ğ´ĞµÑÑŒ Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ´ĞµĞ»Ğ°ĞµĞ¼ â€” Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ Ñ„Ğ¸ĞºÑĞ¸Ñ€ÑƒĞµÑ‚ QuestPoint
        }

        public override void ResetQuest(QuestAsset quest)
        {
            stayTimer = 0f;
            active = false;
            completed = false;
        }

        public override bool IsActive => active;
        public override bool IsCompleted => completed;

        public override int CurrentProgress => 0;
        public override int TargetProgress => 1;

        public override QuestBehaviour Clone() => (StandOnPointQuestBehaviour)MemberwiseClone();
    }
}


ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½. Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ² d:\UnityGames\New-Game\Assets\Features\Quests\struct.txt
